{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../src/reactive.ts"],
  "sourcesContent": ["// src/index.ts\nexport { reactive } from './reactive'", "// src/index.ts\n\n/**\n * \u5224\u65AD\u5BF9\u8C61\n */\nexport const isObject = (value: unknown) => {\n  return typeof value === 'object' && value !== null\n}\n\n/**\n * \u5224\u65AD\u5B57\u7B26\u4E32\n */\nexport const isString = (value: unknown) => {\n  return typeof value === 'string'\n}\n\n/**\n * \u5224\u65AD\u6570\u5B57\n */\nexport const isNumber = (value: unknown) => {\n  return typeof value === 'number'\n}\n\n/**\n * \u5224\u65AD\u6570\u7EC4\n */\nexport const isArray = Array.isArray", "import { isObject } from '@mini-vue3/shared'\n\nconst enum ReactiveFlags {\n  IS_REACTIVE = '__v_isReactive',\n}\n\n// \u7F13\u5B58\u54CD\u5E94\u5F0F\u5BF9\u8C61\nconst reactiveMap = new WeakMap()\n\nexport function reactive(target: object) {\n  // \u5224\u65AD target \u662F\u5426\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61\n  // \u6BCF\u5F53\u4E00\u4E2A target \u9700\u8981\u54CD\u5E94\u5F0F, \u5148\u5224\u65AD\u5176\u6709\u6CA1\u6709\u8BE5\u5C5E\u6027, \u6B64\u65F6\u4EA7\u751F\u5C5E\u6027\u8BBF\u95EE\u64CD\u4F5C, \u5982\u679C target \u88AB\u4EE3\u7406\u8FC7, \u5219\u4F1A\u8FDB\u5165\u4E0B\u9762\u7684 get \u65B9\u6CD5\u4E2D, \u505A\u8FDB\u4E00\u6B65\u5224\u65AD\n  if (target[ReactiveFlags.IS_REACTIVE]) {\n    return target\n  }\n\n  // \u53EA\u80FD\u4EE3\u7406\u5BF9\u8C61\n  if (!isObject(target)) return target\n\n  // \u5224\u65AD target \u662F\u5426\u88AB\u4EE3\u7406\u8FC7, \u5982\u679C\u88AB\u4EE3\u7406\u8FC7, \u5219\u76F4\u63A5\u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61\n  const existing = reactiveMap.get(target)\n\n  if (existing) {\n    return existing\n  }\n\n  const handler = {\n    // \u76D1\u542C\u5C5E\u6027\u8BBF\u95EE\u64CD\u4F5C\n    get(target, key, receiver) {\n      if (key === ReactiveFlags.IS_REACTIVE) {\n        return true\n      }\n      console.log(`=== ${key} \u5C5E\u6027\u88AB\u8BBF\u95EE, \u4F9D\u8D56\u6536\u96C6 ===`)\n      return Reflect.get(target, key)\n    },\n    // \u76D1\u542C\u8BBE\u7F6E\u5C5E\u6027\u64CD\u4F5C\n    set(target, key, value, receiver) {\n      console.log(`${key}\u5C5E\u6027\u53D8\u5316\u4E86, \u6D3E\u53D1\u66F4\u65B0`)\n      if (target[key] !== value) {\n        const result = Reflect.set(target, key, value, receiver)\n        return result\n      }\n    },\n  }\n\n  // \u5B9E\u4F8B\u5316\u4EE3\u7406\u5BF9\u8C61\n  const proxy = new Proxy(target, handler)\n\n  // \u5C06\u4EE3\u7406\u5BF9\u8C61\u8FDB\u884C\u7F13\u5B58\n  reactiveMap.set(target, proxy)\n\n  return proxy\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;;;ACKO,MAAM,WAAW,CAAC,UAAmB;AAC1C,WAAO,OAAO,UAAU,YAAY,UAAU;AAAA,EAChD;AAmBO,MAAM,UAAU,MAAM;;;ACnB7B,MAAM,cAAc,oBAAI,QAAQ;AAEzB,WAAS,SAAS,QAAgB;AAGvC,QAAI,OAAO,kCAAyB,GAAG;AACrC,aAAO;AAAA,IACT;AAGA,QAAI,CAAC,SAAS,MAAM;AAAG,aAAO;AAG9B,UAAM,WAAW,YAAY,IAAI,MAAM;AAEvC,QAAI,UAAU;AACZ,aAAO;AAAA,IACT;AAEA,UAAM,UAAU;AAAA;AAAA,MAEd,IAAIA,SAAQ,KAAK,UAAU;AACzB,YAAI,QAAQ,oCAA2B;AACrC,iBAAO;AAAA,QACT;AACA,gBAAQ,IAAI,OAAO,kEAAqB;AACxC,eAAO,QAAQ,IAAIA,SAAQ,GAAG;AAAA,MAChC;AAAA;AAAA,MAEA,IAAIA,SAAQ,KAAK,OAAO,UAAU;AAChC,gBAAQ,IAAI,GAAG,6DAAgB;AAC/B,YAAIA,QAAO,GAAG,MAAM,OAAO;AACzB,gBAAM,SAAS,QAAQ,IAAIA,SAAQ,KAAK,OAAO,QAAQ;AACvD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF;AAGA,UAAM,QAAQ,IAAI,MAAM,QAAQ,OAAO;AAGvC,gBAAY,IAAI,QAAQ,KAAK;AAE7B,WAAO;AAAA,EACT;",
  "names": ["target"]
}
